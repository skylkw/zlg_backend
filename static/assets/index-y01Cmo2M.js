import{a as q,u as N,b as _,t as k,o as w,s as m,c as D,_ as I,d as V,e as T,f as F,g as R,h as B,i as A}from"./useAppStore-Or4QRcAU.js";import{d as g,o as p,c as K,w as n,e as a,j as f,h as c,f as $,s as M,F as P,u as l,t as z,v as H}from"./index-BPa8dAqI.js";import{h as j}from"./Button.vue_vue_type_script_setup_true_lang-eoizMJei.js";const G=(r,s)=>q.Post("/open_device",{deviceType:r,deviceIndex:s}),E=(r,s,d)=>q.Post("/open_channel",{chn:r,baudRate:s,canType:d}),L=r=>q.Post("/close_channel",{chn:r}),J=()=>q.Post("/close_device"),O={class:"flex flex-col gap-y-4 flex-1"},Q=g({__name:"DeviceForm",setup(r){const s=N(),{send:d}=_(G,{immediate:!1}),{send:t}=_(J,{immediate:!1}),h=k(w({deviceType:m({required_error:"请选择设备类型"}),deviceIndex:m({required_error:"请选择设备索引"})})),{handleSubmit:b,resetForm:U}=D({validationSchema:h,initialValues:{deviceType:"4",deviceIndex:"0"}}),i=b(async u=>{s.deviceStatus?(await t(),s.deviceStatus=!1):(await d(Number(u.deviceType),Number(u.deviceIndex)),s.deviceStatus=!0)}),v=[{name:"deviceType",label:"设备类型",placeholder:"选择设备类型",defaultValue:"4",options:[{value:"3",label:"USBCANI"},{value:"4",label:"USBCANII"}],required:!0},{name:"deviceIndex",label:"设备索引",placeholder:"选择设备索引",defaultValue:"0",options:[{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"}],required:!0}];return(u,o)=>{const x=V,S=T,C=F,y=R;return p(),K(y,{class:"flex flex-col h-full"},{default:n(()=>[a(S,null,{default:n(()=>[a(x,null,{default:n(()=>o[1]||(o[1]=[f("设备控制")])),_:1})]),_:1}),a(C,{class:"flex flex-col flex-1"},{default:n(()=>[c("form",{onSubmit:o[0]||(o[0]=H((...e)=>l(i)&&l(i)(...e),["prevent"])),class:"flex flex-col flex-1"},[c("div",O,[(p(),$(P,null,M(v,e=>a(B,{key:e.name,name:e.name,label:e.label,placeholder:e.placeholder,options:e.options,defaultValue:e.defaultValue,required:e.required,layout:"horizontal"},null,8,["name","label","placeholder","options","defaultValue","required"])),64))]),a(l(I),{class:"mt-4"},{default:n(()=>[a(l(j),{type:"submit",class:"w-full"},{default:n(()=>[f(z(l(s).deviceStatus?"关闭":"打开"),1)]),_:1})]),_:1})],32)]),_:1})]),_:1})}}}),W={class:"flex flex-col gap-y-4 flex-1"},X=g({__name:"Channel0Form",setup(r){const{send:s}=_(E,{immediate:!1}),{send:d}=_(L,{immediate:!1}),t=N(),h=k(w({baudRate0:m({required_error:"请选择波特率"}),canType0:m({required_error:"请选择CAN类型"}),filterMode0:m()})),{handleSubmit:b,resetForm:U}=D({validationSchema:h,initialValues:{baudRate0:"500000",canType0:"0",filterMode0:"None"}}),i=b(async u=>{t.channel0Status?(await d(0),t.channel0Status=!1):(await s(0,Number(u.baudRate0),Number(u.canType0)),t.channel0Status=!0)}),v=[{name:"baudRate0",label:"波特率",placeholder:"选择波特率",defaultValue:"500000",options:[{value:"500000",label:"500K"},{value:"250000",label:"250K"},{value:"125000",label:"125K"}],required:!0},{name:"canType0",label:"CAN类型",placeholder:"选择CAN类型",defaultValue:"0",options:[{value:"0",label:"CAN"},{value:"1",label:"CANFD"}],required:!0}];return(u,o)=>{const x=V,S=T,C=F,y=R;return p(),K(y,{class:"flex flex-col h-full"},{default:n(()=>[a(S,null,{default:n(()=>[a(x,null,{default:n(()=>o[1]||(o[1]=[f("通道0控制")])),_:1})]),_:1}),a(C,{class:"flex flex-col flex-1"},{default:n(()=>[c("form",{onSubmit:o[0]||(o[0]=H((...e)=>l(i)&&l(i)(...e),["prevent"])),class:"flex flex-col flex-1"},[c("div",W,[(p(),$(P,null,M(v,e=>a(B,{key:e.name,name:e.name,label:e.label,placeholder:e.placeholder,options:e.options,defaultValue:e.defaultValue,required:e.required,layout:"horizontal"},null,8,["name","label","placeholder","options","defaultValue","required"])),64))]),a(l(I),{class:"mt-4"},{default:n(()=>[a(l(j),{type:"submit",class:"w-full",disabled:!l(t).deviceStatus},{default:n(()=>[f(z(l(t).channel0Status?"关闭":"打开"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1})}}}),Y={class:"flex flex-col gap-y-4 flex-1"},Z=g({__name:"Channel1Form",setup(r){const{send:s}=_(E,{immediate:!1}),{send:d}=_(L,{immediate:!1}),t=N(),h=k(w({baudRate1:m({required_error:"请选择波特率"}),canType1:m({required_error:"请选择CAN类型"}),filterMode1:m()})),{handleSubmit:b,resetForm:U}=D({validationSchema:h,initialValues:{baudRate1:"500000",canType1:"0",filterMode1:"None"}}),i=b(async u=>{t.channel1Status?(await d(1),t.channel1Status=!1):(await s(1,Number(u.baudRate1),Number(u.canType1)),t.channel1Status=!0)}),v=[{name:"baudRate1",label:"波特率",placeholder:"选择波特率",defaultValue:"500000",options:[{value:"500000",label:"500K"},{value:"250000",label:"250K"},{value:"125000",label:"125K"}],required:!0},{name:"canType1",label:"CAN类型",placeholder:"选择CAN类型",defaultValue:"0",options:[{value:"0",label:"CAN"},{value:"1",label:"CANFD"}],required:!0}];return(u,o)=>{const x=V,S=T,C=F,y=R;return p(),K(y,{class:"flex flex-col h-full"},{default:n(()=>[a(S,null,{default:n(()=>[a(x,null,{default:n(()=>o[1]||(o[1]=[f("通道1控制")])),_:1})]),_:1}),a(C,{class:"flex flex-col flex-1"},{default:n(()=>[c("form",{onSubmit:o[0]||(o[0]=H((...e)=>l(i)&&l(i)(...e),["prevent"])),class:"flex flex-col flex-1"},[c("div",Y,[(p(),$(P,null,M(v,e=>a(B,{key:e.name,name:e.name,label:e.label,placeholder:e.placeholder,options:e.options,defaultValue:e.defaultValue,required:e.required,layout:"horizontal"},null,8,["name","label","placeholder","options","defaultValue","required"])),64))]),a(l(I),{class:"mt-4"},{default:n(()=>[a(l(j),{type:"submit",class:"w-full",disabled:!l(t).deviceStatus},{default:n(()=>[f(z(l(t).channel1Status?"关闭":"打开"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1})}}}),ee={class:"container mx-auto grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6"},ae={class:"flex flex-col gap-y-4"},le={class:"flex items-center"},te={class:"flex items-center"},ne={class:"flex items-center"},ue=g({__name:"index",setup(r){const s=N();return(d,t)=>(p(),$("div",ee,[a(Q),a(X),a(Z),a(l(R),{class:"xl:col-span-3"},{default:n(()=>[a(l(T),null,{default:n(()=>[a(l(V),null,{default:n(()=>t[0]||(t[0]=[f("状态显示")])),_:1})]),_:1}),a(l(F),null,{default:n(()=>[c("div",ae,[c("div",le,[a(l(A),{checked:l(s).deviceStatus},null,8,["checked"]),t[1]||(t[1]=c("span",{class:"ml-3"},"设备状态",-1))]),c("div",te,[a(l(A),{checked:l(s).channel0Status},null,8,["checked"]),t[2]||(t[2]=c("span",{class:"ml-3"},"通道0状态",-1))]),c("div",ne,[a(l(A),{checked:l(s).channel1Status},null,8,["checked"]),t[3]||(t[3]=c("span",{class:"ml-3"},"通道1状态",-1))])])]),_:1})]),_:1})]))}});export{ue as default};
